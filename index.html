<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Pina Bar - O melhor bar de São João da Madeira com ambiente acolhedor, bebidas de qualidade e petiscos deliciosos. Visite-nos e desfrute de momentos inesquecíveis.">
    <meta name="keywords" content="Pina Bar, bar São João da Madeira, bar, bebidas, petiscos, cocktails, cerveja, café, Pina, cardápio Pina Bar">
    <title>Pina Bar</title>
    <link rel="stylesheet" href="main.css">
    <link rel="icon" type="image/jpeg" href="img/logo.jpg">
    <style>
        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: stretch;
        }
        .logo-title {
            font-size: 2.2rem;
            color: #d6a600;
            margin: 32px 0 16px 0;
            text-align: center;
            letter-spacing: 2px;
            text-shadow: 0 2px 8px #000a;
        }
        .slider-container {
            width: 100vw;
            max-width: 100vw;
            aspect-ratio: 16/7;
            margin: 0 auto 24px auto;
            border-radius: 0;
            overflow: hidden;
            box-shadow: 0 4px 32px rgba(0,0,0,0.25);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .slider-img {
            width: 100vw;
            height: 100%;
            max-height: 60vh;
            object-fit: contain;
            position: absolute;
            left: 0; top: 0;
            opacity: 0;
            transition: opacity 1s;
            background-color: transparent; /* Removed background to avoid double opacity effect */
        }
        .slider-img.active {
            opacity: 1;
            position: absolute;
            z-index: 1;
        }
        .slider-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(35,37,38,0.7);
            border: none;
            color: #fff;
            font-size: 2.5rem;
            border-radius: 50%;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 2;
            transition: background 0.2s;
        }
        .slider-arrow:hover {
            background: #d6a600;
            color: #232526;
        }
        .slider-arrow.left {
            left: 16px;
        }
        .slider-arrow.right {
            right: 16px;
        }
        .slider-dots {
            position: absolute;
            bottom: 18px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 3;
        }
        .slider-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            border: none;
            cursor: pointer;
            transition: background 0.2s;
        }
        @media (max-width: 900px) {
            .slider-dot {
                width: 10px;
                height: 10px;
            }
        }
        @media (max-width: 600px) {
            .slider-dot {
                width: 8px;
                height: 8px;
            }
        }
        .slider-dot.active {
            background: #d6a600;
        }
        .go-menu-btn {
            display: block;
            margin: 32px auto 0 auto;
            padding: 14px 36px;
            font-size: 1.2rem;
            border-radius: 8px;
            border: none;
            background: #d6a600;
            color: #232526;
            font-weight: bold;
            box-shadow: 0 2px 12px rgba(0,0,0,0.12);
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
        }
        .go-menu-btn:hover {
            background: #232526;
            color: #d6a600;
        }
        /* Placeholder modal */
        .modal-festa-bg {
            position: fixed;
            z-index: 10000;
            left: 0; top: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.85);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-festa-content {
            background: #232526;
            border-radius: 16px;
            padding: 24px 16px 16px 16px;
            box-shadow: 0 4px 32px #000a;
            max-width: 95vw;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .modal-festa-content img {
            max-width: 80vw;
            max-height: 60vh;
            border-radius: 12px;
            box-shadow: 0 2px 16px #000a;
            margin-bottom: 16px;
        }
        .modal-festa-close {
            margin-top: 8px;
            padding: 8px 24px;
            font-size: 1rem;
            border-radius: 8px;
            border: none;
            background: #d6a600;
            color: #232526;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
        }
        .modal-festa-close:hover {
            background: #232526;
            color: #d6a600;
        }
        @media (max-width: 900px) {
            .slider-container, .slider-img {
                max-height: 40vh;
            }
        }
        @media (max-width: 600px) {
            .slider-container, .slider-img {
                max-height: 30vh;
            }
            .logo-title {
                font-size: 1.4rem;
            }
        }
    </style>
</head>
<body>
    <div class="logo-title">Pina Bar</div>
    <div class="slider-container" id="slider">
        <!-- As imagens serão inseridas via JavaScript -->
        <button class="slider-arrow left" id="slider-arrow-left">&#8592;</button>
        <button class="slider-arrow right" id="slider-arrow-right">&#8594;</button>
        <div class="slider-dots" id="slider-dots"></div>
    </div>
    <a href="menu.html"><button class="go-menu-btn">Ver Cardápio</button></a>

    <!-- Container para múltiplos popups -->
    <div id="popups-container">
        <!-- Popups serão inseridos dinamicamente via JavaScript -->
    </div>

    <script>
        // Lista de imagens da pasta img (todas as imagens numeradas, exceto logo.jpg)
        const imageFiles = [
            "img/1.jpg", "img/2.jpg", "img/3.jpg", "img/4.jpg", "img/5.jpg",
            "img/6.jpg", "img/7.jpg", "img/8.jpg", "img/9.jpg", "img/10.jpg",
            "img/11.jpg", "img/12.jpg", "img/13.jpg", "img/14.jpg", "img/15.jpg",
            "img/16.jpg", "img/17.jpg", "img/18.jpg", "img/19.jpg", "img/20.jpg",
            "img/21.jpg", "img/22.jpg", "img/23.jpg", "img/24.jpg", "img/25.jpg",
            "img/26.jpg"
        ];

        // Função para embaralhar array
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Configuração do slider de imagens
        function setupImageSlider() {
            const shuffledImages = shuffle([...imageFiles]);
            const slider = document.getElementById('slider');

            // Remover imagens existentes (caso existam)
            document.querySelectorAll('.slider-img').forEach(e => e.remove());

            // Adicionar imagens ao slider
            shuffledImages.forEach((src, i) => {
                const img = document.createElement('img');
                img.src = src;
                img.className = 'slider-img' + (i === 0 ? ' active' : '');
                img.alt = 'Foto do bar ' + (i + 1);
                slider.insertBefore(img, slider.querySelector('.slider-arrow.left'));
            });

            // Configurar controles do slider
            const imgs = slider.querySelectorAll('.slider-img');
            const dotsContainer = document.getElementById('slider-dots');
            const leftArrow = document.getElementById('slider-arrow-left');
            const rightArrow = document.getElementById('slider-arrow-right');
            let idx = 0, intervalId;

            // Limpar dots antigos
            dotsContainer.innerHTML = '';
            imgs.forEach((_, i) => {
                const dot = document.createElement('button');
                dot.className = 'slider-dot' + (i === 0 ? ' active' : '');
                dot.onclick = () => { stopAuto(); showSlide(i); startAuto(); };
                dotsContainer.appendChild(dot);
            });

            function showSlide(i) {
                imgs[idx].classList.remove('active');
                dotsContainer.children[idx].classList.remove('active');
                idx = (i + imgs.length) % imgs.length;
                imgs[idx].classList.add('active');
                dotsContainer.children[idx].classList.add('active');
            }

            function nextSlide() { showSlide(idx + 1); }
            function prevSlide() { showSlide(idx - 1); }

            function startAuto() {
                intervalId = setInterval(nextSlide, 4000);
            }

            function stopAuto() {
                clearInterval(intervalId);
            }

            leftArrow.onclick = () => { stopAuto(); prevSlide(); startAuto(); };
            rightArrow.onclick = () => { stopAuto(); nextSlide(); startAuto(); };
            startAuto();
        }

        // Função para carregar imagens da pasta cartazesPopup
        function loadPopupImages() {
            // Lista de extensões de imagem comuns
            const imageExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.webp'];

            // Fazer uma requisição para obter a lista de arquivos na pasta cartazesPopup
            fetch('cartazesPopup/')
                .then(response => response.text())
                .then(html => {
                    // Extrair nomes de arquivos do HTML retornado
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const links = Array.from(doc.querySelectorAll('a'));

                    // Filtrar apenas arquivos de imagem
                    const imageFiles = links
                        .map(link => link.getAttribute('href'))
                        .filter(href => {
                            if (!href) return false;
                            const lowerHref = href.toLowerCase();
                            return imageExtensions.some(ext => lowerHref.endsWith(ext));
                        })
                        .map(href => 'cartazesPopup/' + href);

                    // Se encontrou imagens, mostrar todas como popups
                    if (imageFiles.length > 0) {
                        createPopups(imageFiles);
                    } else {
                        // Fallback para o método alternativo se o fetch não funcionar
                        createDefaultPopups();
                    }
                })
                .catch(error => {
                    console.error('Erro ao carregar imagens de popup:', error);
                    createDefaultPopups();
                });
        }

        // Função para criar popups para todas as imagens
        function createPopups(imageFiles) {
            if (!imageFiles || imageFiles.length === 0) return;

            const popupsContainer = document.getElementById('popups-container');

            // Limpar popups existentes
            popupsContainer.innerHTML = '';

            // Criar um popup para cada imagem
            imageFiles.forEach((imageSrc, index) => {
                // Calcular o z-index para criar o efeito de sobreposição
                // O primeiro popup terá o z-index mais alto
                const zIndex = 10000 - index;

                // Criar o elemento de fundo do popup
                const popupBg = document.createElement('div');
                popupBg.className = 'modal-festa-bg';
                popupBg.style.zIndex = zIndex;
                popupBg.style.display = 'flex';

                // Criar o conteúdo do popup
                const popupContent = document.createElement('div');
                popupContent.className = 'modal-festa-content';

                // Criar a imagem
                const img = document.createElement('img');
                img.src = imageSrc;
                img.alt = 'Cartaz ' + (index + 1);

                // Criar o botão de fechar
                const closeButton = document.createElement('button');
                closeButton.className = 'modal-festa-close';
                closeButton.textContent = 'Fechar';
                closeButton.onclick = function() {
                    popupBg.style.display = 'none';
                };

                // Montar o popup
                popupContent.appendChild(img);
                popupContent.appendChild(closeButton);
                popupBg.appendChild(popupContent);

                // Adicionar evento para fechar ao clicar fora do conteúdo
                popupBg.addEventListener('click', function(e) {
                    if (e.target === this) this.style.display = 'none';
                });

                // Adicionar o popup ao container
                popupsContainer.appendChild(popupBg);

                // Adicionar um pequeno deslocamento para cada popup
                // para criar um efeito visual de sobreposição
                popupContent.style.marginTop = (index * 10) + 'px';
                popupContent.style.marginLeft = (index * 10) + 'px';
            });
        }

        // Método alternativo para criar popups (usado como fallback)
        function createDefaultPopups() {
            // Listar manualmente as imagens na pasta cartazesPopup
            const popupImages = ['cartazesPopup/8639e71f-e16d-4f31-832b-93e5d7395407.jpg'];

            // Adicionar qualquer outra imagem que possa existir na pasta
            // Este array será atualizado automaticamente quando novas imagens forem adicionadas
            // ao código durante a manutenção do site

            createPopups(popupImages);
        }

        // Inicializar componentes
        document.addEventListener('DOMContentLoaded', function() {
            setupImageSlider();
            loadPopupImages();
        });
    </script>
</body>
</html>
