<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Pina Bar - Cardápio completo do Pina Bar">
    <meta name="keywords" content="Pina Bar, cardápio Pina Bar, menu Pina Bar, bebidas Pina Bar, petiscos, cocktails, cerveja, café, Pina, bar Lisboa">
    <title>Pina Bar - Cardápio</title>
    <link rel="stylesheet" href="main.css">
    <link rel="icon" type="image/jpeg" href="img/logo.jpg">
    <style>
        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .pdf-container {
            width: 100%;
            max-width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .pdf-viewer {
            width: 100%;
            height: 100%;
            border: none;
        }
        /* Modal styles for popups */
        .modal-festa-bg {
            position: fixed;
            z-index: 10000;
            left: 0; top: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.85);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-festa-content {
            background: #232526;
            border-radius: 16px;
            padding: 24px 16px 16px 16px;
            box-shadow: 0 4px 32px #000a;
            max-width: 95vw;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .modal-festa-content img {
            max-width: 80vw;
            max-height: 60vh;
            border-radius: 12px;
            box-shadow: 0 2px 16px #000a;
            margin-bottom: 16px;
        }
        .modal-festa-close {
            margin-top: 8px;
            padding: 8px 24px;
            font-size: 1rem;
            border-radius: 8px;
            border: none;
            background: #d6a600;
            color: #232526;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
        }
        .modal-festa-close:hover {
            background: #232526;
            color: #d6a600;
        }
    </style>
</head>
<body>
    <div class="pdf-container">
        <iframe class="pdf-viewer" src="menu.pdf" title="Cardápio Pina Bar"></iframe>
    </div>

    <!-- Container for popups -->
    <div id="popups-container">
        <!-- Popups will be inserted dynamically via JavaScript -->
    </div>

    <script>
        // Function to load images from cartazesPopup folder
        function loadPopupImages() {
            // List of common image extensions
            const imageExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.webp'];

            // Make a request to get the list of files in the cartazesPopup folder
            fetch('cartazesPopup/')
                .then(response => response.text())
                .then(html => {
                    // Extract filenames from the returned HTML
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const links = Array.from(doc.querySelectorAll('a'));

                    // Filter only image files
                    const imageFiles = links
                        .map(link => link.getAttribute('href'))
                        .filter(href => {
                            if (!href) return false;
                            const lowerHref = href.toLowerCase();
                            return imageExtensions.some(ext => lowerHref.endsWith(ext));
                        })
                        .map(href => 'cartazesPopup/' + href);

                    // If images were found, show them as popups
                    if (imageFiles.length > 0) {
                        createPopups(imageFiles);
                    } else {
                        // Fallback to alternative method if fetch doesn't work
                        createDefaultPopups();
                    }
                })
                .catch(error => {
                    console.error('Error loading popup images:', error);
                    createDefaultPopups();
                });
        }

        // Function to create popups for all images
        function createPopups(imageFiles) {
            if (!imageFiles || imageFiles.length === 0) return;

            const popupsContainer = document.getElementById('popups-container');

            // Clear existing popups
            popupsContainer.innerHTML = '';

            // Create a popup for each image
            imageFiles.forEach((imageSrc, index) => {
                // Calculate z-index to create overlay effect
                // First popup will have highest z-index
                const zIndex = 10000 - index;

                // Create popup background element
                const popupBg = document.createElement('div');
                popupBg.className = 'modal-festa-bg';
                popupBg.style.zIndex = zIndex;
                popupBg.style.display = 'flex';

                // Create popup content
                const popupContent = document.createElement('div');
                popupContent.className = 'modal-festa-content';

                // Create image
                const img = document.createElement('img');
                img.src = imageSrc;
                img.alt = 'Cartaz ' + (index + 1);

                // Create close button
                const closeButton = document.createElement('button');
                closeButton.className = 'modal-festa-close';
                closeButton.textContent = 'Fechar';
                closeButton.onclick = function() {
                    popupBg.style.display = 'none';
                };

                // Assemble popup
                popupContent.appendChild(img);
                popupContent.appendChild(closeButton);
                popupBg.appendChild(popupContent);

                // Add event to close when clicking outside content
                popupBg.addEventListener('click', function(e) {
                    if (e.target === this) this.style.display = 'none';
                });

                // Add popup to container
                popupsContainer.appendChild(popupBg);

                // Add small offset for each popup
                // to create visual overlay effect
                popupContent.style.marginTop = (index * 10) + 'px';
                popupContent.style.marginLeft = (index * 10) + 'px';
            });
        }

        // Alternative method to create popups (used as fallback)
        function createDefaultPopups() {
            // Manually list images in cartazesPopup folder
            const popupImages = ['cartazesPopup/8639e71f-e16d-4f31-832b-93e5d7395407.jpg'];

            // Add any other images that might exist in the folder
            // This array will be automatically updated when new images are added
            // to the code during site maintenance

            createPopups(popupImages);
        }

        // Initialize components
        document.addEventListener('DOMContentLoaded', function() {
            loadPopupImages();
        });
    </script>
</body>
</html>
